# ุฏููู ุงูุฅุตูุงุญ ุงูุณุฑูุน ูููุณุชุฎุฏููู ุงูุนุงูููู

## ุงููุดููุฉ ุงูุญุงููุฉ
ุงููุณุชุฎุฏู `testo@sama.com` (ID: 6e12f9dc-2335-404d-8338-17fae71a3a77) ููุงูู ุนููู ูู ุงูุฃุฏูู ููู ูุง ูุณุชุทูุน ุชุณุฌูู ุงูุฏุฎูู.

## ุงูุญููู ุงูุณุฑูุนุฉ

### 1. ุงูุญู ุงูุฃูู: SQL ูู Supabase Dashboard

ุงุฐูุจ ุฅูู Supabase Dashboard โ SQL Editor ูุดุบู:

```sql
-- ุฅุตูุงุญ ุงููุณุชุฎุฏู ุงููุญุฏุฏ
UPDATE user_profiles 
SET 
    status = 'active',
    updated_at = NOW()
WHERE 
    email = 'testo@sama.com';

-- ุงูุชุญูู ูู ุงููุชูุฌุฉ
SELECT id, email, status, updated_at 
FROM user_profiles 
WHERE email = 'testo@sama.com';
```

### 2. ุงูุญู ุงูุซุงูู: ูู ุงูุชุทุจูู

1. ุงุฐูุจ ุฅูู ุดุงุดุฉ ุทูุจุงุช ุงูุชุณุฌูู ุงูุฌุฏูุฏุฉ (ุงูุฃุฏูู)
2. ุงุถุบุท ุนูู ุฃููููุฉ ุงูุฅุตูุงุญ ุงูุณุฑูุน (๐ง)
3. ูู ูุณู "ุงูุฅุตูุงุญ ุงูุทุงุฑุฆ":
   - ุงุถุบุท "ุฅุตูุงุญ testo@sama.com"
   - ุฃู ุงุถุบุท "ุฅุตูุงุญ ุดุงูู ุทุงุฑุฆ" ูุฅุตูุงุญ ุฌููุน ุงููุณุชุฎุฏููู

### 3. ุงูุญู ุงูุซุงูุซ: ุฅุตูุงุญ ูุฏูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

ูู Supabase Dashboard โ Table Editor โ user_profiles:

1. ุงุจุญุซ ุนู ุงููุณุชุฎุฏู `testo@sama.com`
2. ุบูุฑ `status` ูู `approved` ุฅูู `active`
3. ุงุญูุธ ุงูุชุบููุฑุงุช

## ุงุฎุชุจุงุฑ ุงูุญู

ุจุนุฏ ุชุทุจูู ุฃู ูู ุงูุญููู:

1. **ูู ุงูุชุทุจูู**: ุงุณุชุฎุฏู ุฒุฑ "ุงุฎุชุจุงุฑ ุชุณุฌูู ุฏุฎูู testo@sama.com"
2. **ูุฏููุงู**: ุญุงูู ุชุณุฌูู ุงูุฏุฎูู ุจู:
   - ุงูุจุฑูุฏ: `testo@sama.com`
   - ูููุฉ ุงููุฑูุฑ: `password123` (ุฃู ูููุฉ ุงููุฑูุฑ ุงูุตุญูุญุฉ)

## ุงูุญู ุงูุดุงูู (ูููุณุชูุจู)

ูููุน ูุฐู ุงููุดููุฉ ูุณุชูุจูุงูุ ุดุบู ูุฐุง SQL:

```sql
-- ุฅุถุงูุฉ trigger ุชููุงุฆู
CREATE OR REPLACE FUNCTION auto_activate_approved_users()
RETURNS TRIGGER
LANGUAGE plpgsql
AS $$
BEGIN
    -- ุฅุฐุง ุชู ุชุบููุฑ ุงูุญุงูุฉ ุฅูู approvedุ ููุนู ุงูุญุณุงุจ ุชููุงุฆูุงู
    IF NEW.status = 'approved' AND (OLD.status IS NULL OR OLD.status != 'approved') THEN
        NEW.status = 'active';
    END IF;
    
    RETURN NEW;
END;
$$;

-- ุฅูุดุงุก trigger
DROP TRIGGER IF EXISTS trigger_auto_activate ON user_profiles;
CREATE TRIGGER trigger_auto_activate
    BEFORE UPDATE ON user_profiles
    FOR EACH ROW
    EXECUTE FUNCTION auto_activate_approved_users();
```

## ุงูุชุญูู ูู ุงููุฌุงุญ

ุจุนุฏ ุงูุฅุตูุงุญุ ูุฌุจ ุฃู ุชุฑู:

โ **ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:**
- `status = 'active'`
- `updated_at` ูุญุฏุซ

โ **ูู ุงูุชุทุจูู:**
- ุงููุณุชุฎุฏู ูุณุชุทูุน ุชุณุฌูู ุงูุฏุฎูู
- ูุชู ุชูุฌููู ูููุญุฉ ุงูุชุญูู ุงูููุงุณุจุฉ

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฅุฐุง ูู ููุฌุญ ุงูุญู:

1. **ุชุญูู ูู ูููุฉ ุงููุฑูุฑ:**
   ```sql
   -- ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ
   UPDATE auth.users 
   SET encrypted_password = crypt('password123', gen_salt('bf'))
   WHERE email = 'testo@sama.com';
   ```

2. **ุชุญูู ูู ูุฌูุฏ ุงููุณุชุฎุฏู:**
   ```sql
   SELECT * FROM user_profiles WHERE email = 'testo@sama.com';
   SELECT * FROM auth.users WHERE email = 'testo@sama.com';
   ```

3. **ูุญุต ุงูุณุฌูุงุช:**
   - ุชุญูู ูู ุณุฌูุงุช ุงูุชุทุจูู
   - ุชุญูู ูู ุณุฌูุงุช Supabase

## ุงูุฏุนู ุงูููู

ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ:

1. ุงุณุชุฎุฏู ุฃุฏูุงุช ุงูุฅุตูุงุญ ุงูุณุฑูุน ูู ุงูุชุทุจูู
2. ุฑุงุฌุน ุณุฌูุงุช ุงูุฃุฎุทุงุก
3. ุชุญูู ูู ุฅุนุฏุงุฏุงุช RLS ูู Supabase
4. ุชุฃูุฏ ูู ุตุญุฉ ุฅุนุฏุงุฏุงุช ุงููุตุงุฏูุฉ

## ููุงุญุธุงุช ูููุฉ

โ๏ธ **ุชุญุฐูุฑ:** ูุฐู ุญููู ุณุฑูุนุฉ ูููุดููุฉ ุงูุญุงููุฉ. ููุญู ุงูุฏุงุฆูุ ูุฌุจ ุชุทุจูู ุงูุญู ุงูุดุงูู ุงููุฐููุฑ ุฃุนูุงู.

๐ **ุงูุชุญุฏูุซ ุงูุชููุงุฆู:** ุจุนุฏ ุชุทุจูู ุงูุญู ุงูุดุงููุ ุณุชุชู ูุนุงูุฌุฉ ุงููุณุชุฎุฏููู ุงูุฌุฏุฏ ุชููุงุฆูุงู.

๐ **ุงููุฑุงูุจุฉ:** ุงุณุชุฎุฏู ุฃุฏูุงุช ุงูุชูุงุฑูุฑ ูู ุงูุชุทุจูู ููุฑุงูุจุฉ ุญุงูุฉ ุงููุณุชุฎุฏููู.
